<div class="p-6 max-w-4xl mx-auto bg-white rounded-xl shadow-md">
<h1 class="text-2xl font-bold mb-6 text-gray-800">✏ Editar Usuario: {{ usuario.username }}</h1>
<form class="grid grid-cols-1 md:grid-cols-2 gap-4" id="editarUsuarioForm" method="POST">
    {% csrf_token %}

    <input class="input input-bordered w-full bg-gray-100" name="username" placeholder="Nombre de usuario" required="" type="text" value="{{ usuario.username }}"/>
<input class="input input-bordered w-full bg-gray-100" name="email" placeholder="Correo electrónico" type="email" value="{{ usuario.email }}"/>
<input class="input input-bordered w-full bg-gray-100" name="first_name" placeholder="Nombre" type="text" value="{{ usuario.first_name }}"/>
<input class="input input-bordered w-full bg-gray-100" name="last_name" placeholder="Apellidos" type="text" value="{{ usuario.last_name }}"/>
<div class="flex items-center space-x-3 col-span-2 mt-2">
<label class="flex items-center gap-2"><input %}="" %}checked{%="" endif="" if="" name="is_active" type="checkbox" usuario.is_active="" {%=""/>Activo</label>
<label class="flex items-center gap-2"><input %}="" %}checked{%="" endif="" if="" name="is_staff" type="checkbox" usuario.is_staff="" {%=""/>Staff</label>
<label class="flex items-center gap-2"><input %}="" %}checked{%="" endif="" if="" name="is_superuser" type="checkbox" usuario.is_superuser="" {%=""/>Superusuario</label>
</div>
<div class="col-span-2">
<label class="block font-semibold mb-1">Grupos:</label>
<div class="grid grid-cols-2 gap-2">
        {% for grupo in grupos %}
        <label class="flex items-center gap-2">
<input %}="" %}checked{%="" endif="" grupo="" if="" in="" name="groups" type="checkbox" usuario.groups.all="" value="{{ grupo.id }}" {%=""/>
          {{ grupo.name }}
        </label>
        {% endfor %}
      </div>
</div>
<div class="col-span-2 mt-4">
<h3 class="font-semibold text-lg mb-2">Cambiar contraseña (opcional)</h3>
<input class="input input-bordered w-full bg-gray-100" id="password1" name="password1" placeholder="Nueva contraseña" type="password"/>
<input class="input input-bordered w-full bg-gray-100 mt-2" id="password2" name="password2" placeholder="Confirmar contraseña" type="password"/>
<p class="text-red-600 text-sm mt-1 hidden" id="error-msg"></p>
</div>
<div class="col-span-2 mt-4 flex items-center gap-4">
<button class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded" type="submit">Guardar cambios</button>
<a class="text-blue-600 hover:underline" href="{% url 'dashboard_admin:listar_usuarios' %}">← Volver al listado</a>
</div>
</form>
</div><script>
  document.getElementById('editarUsuarioForm').addEventListener('submit', function(event) {
    const pwd1 = document.getElementById('password1').value;
    const pwd2 = document.getElementById('password2').value;
    const errorMsg = document.getElementById('error-msg');

    if (pwd1 || pwd2) {
      if (pwd1.length < 8) {
        event.preventDefault();
        errorMsg.textContent = "La contraseña debe tener al menos 8 caracteres.";
        errorMsg.classList.remove('hidden');
        return;
      }
      if (pwd1 !== pwd2) {
        event.preventDefault();
        errorMsg.textContent = "Las contraseñas no coinciden.";
        errorMsg.classList.remove('hidden');
        return;
      }
    }

    errorMsg.classList.add('hidden');
  });
</script><html lang="es"><head><meta content="width=device-width, initial-scale=1.0" name="viewport"/><script src="https://cdn.tailwindcss.com"></script></head><body>{% extends "dashboard_admin/base.html" %}

{% block dashboard_content %}


{% endblock %}
</body></html>