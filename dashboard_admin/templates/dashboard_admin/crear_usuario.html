<div class="p-6 max-w-4xl mx-auto">
<h1 class="text-3xl font-bold mb-6">
    {% if usuario %}✏️ Editar usuario: {{ usuario.username }}{% else %}👤 Crear nuevo usuario{% endif %}
  </h1>
<form class="bg-white p-8 rounded-2xl shadow space-y-6" method="POST">
    {% csrf_token %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Nombre de usuario</label>
<input class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" name="username" placeholder="Ej: juan123" required="" type="text" value="{{ usuario.username|default_if_none:'' }}"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Correo electrónico</label>
<input class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" name="email" placeholder="Ej: correo@dominio.com" type="email" value="{{ usuario.email|default_if_none:'' }}"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">
          Contraseña
          {% if usuario %}
            <small class="text-gray-500">(Opcional para cambiar)</small>
          {% endif %}
        </label>
<input %}="" %}required{%="" class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" endif="" if="" name="password1" not="" placeholder="Contraseña" type="password" usuario="" {%=""/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">
          Confirmar contraseña
          {% if usuario %}
            <small class="text-gray-500">(Opcional para cambiar)</small>
          {% endif %}
        </label>
<input %}="" %}required{%="" class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" endif="" if="" name="password2" not="" placeholder="Confirmar" type="password" usuario="" {%=""/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">ID / Número de identidad</label>
<input class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" name="identidad" placeholder="Ej: 12345678-9" type="text" value="{{ usuario.identidad|default_if_none:'' }}"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
<input class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" name="first_name" placeholder="Ej: Luis Enrique" type="text" value="{{ usuario.first_name|default_if_none:'' }}"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Apellidos</label>
<input class="w-full rounded-lg border-gray-300 bg-gray-100 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" name="last_name" placeholder="Ej: Gil Moya" type="text" value="{{ usuario.last_name|default_if_none:'' }}"/>
</div>
</div>
<div class="flex flex-wrap gap-4 pt-4">
<label class="inline-flex items-center gap-2 text-sm font-medium text-gray-700">
<input %}="" %}checked{%="" and="" class="rounded border-gray-300 text-blue-600" elif="" endif="" if="" name="is_active" not="" type="checkbox" usuario="" usuario.is_active="" {%=""/>
        Activo
      </label>
<label class="inline-flex items-center gap-2 text-sm font-medium text-gray-700">
<input %}="" %}checked{%="" and="" class="rounded border-gray-300 text-blue-600" endif="" if="" name="is_staff" type="checkbox" usuario="" usuario.is_staff="" {%=""/>
        Staff
      </label>
<label class="inline-flex items-center gap-2 text-sm font-medium text-gray-700">
<input %}="" %}checked{%="" and="" class="rounded border-gray-300 text-blue-600" endif="" if="" name="is_superuser" type="checkbox" usuario="" usuario.is_superuser="" {%=""/>
        Superusuario
      </label>
</div>
<div>
<label class="block text-sm font-semibold text-gray-700 mb-2">Grupos disponibles:</label>
<div class="flex flex-wrap gap-3">
        {% for grupo in grupos %}
          <label class="inline-flex items-center bg-gray-100 px-3 py-1 rounded-full text-sm text-gray-700 shadow-sm">
<input %}="" %}checked{%="" and="" class="mr-2" endif="" grupo="" if="" in="" name="groups" type="checkbox" usuario="" usuario.groups.all="" value="{{ grupo.id }}" {%=""/>
            {{ grupo.name }}
          </label>
        {% empty %}
          <p class="text-gray-400 text-sm">No hay grupos disponibles.</p>
        {% endfor %}
      </div>
</div>
<div class="pt-6 flex items-center gap-4">
<button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition duration-150" onclick="window.location.href='{% url 'dashboard_admin:listar_usuarios' %}'" type="button">
        ← Volver
      </button>
<button class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-150" type="submit">
    {% if usuario %}💾 Guardar cambios{% else %}➕ Crear usuario{% endif %}
</button>
</div>
</form>
</div><html lang="es"><head><meta content="width=device-width, initial-scale=1.0" name="viewport"/><script src="https://cdn.tailwindcss.com"></script></head><body>{% extends "dashboard_admin/base.html" %}
{% load static %}

{% block title %}
  {% if usuario %}Editar Usuario - Admin{% else %}Crear Usuario - Admin{% endif %}
{% endblock %}

{% block dashboard_content %}

{% endblock %}
</body></html>